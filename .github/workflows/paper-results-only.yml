name: Generate Paper Results

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  generate-results:
    name: Generate IEEE Paper Results
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      
      - name: Setup Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
      
      - name: Install Dependencies
        run: pip install numpy matplotlib scipy pandas
      
      - name: Generate All Results
        run: |
          cd analysis
          python3 generate_paper_results.py --output-dir ../paper_results
        continue-on-error: true
      
      - name: List Generated Files
        run: |
          echo "Generated files:"
          find paper_results -type f 2>/dev/null || echo "No files generated"
          ls -lR paper_results/ 2>/dev/null || echo "Directory not found"
      
      - name: Upload Results
        uses: actions/upload-artifact@v4
        if: always()
        with:
          name: ieee-paper-results
          path: |
            paper_results/
